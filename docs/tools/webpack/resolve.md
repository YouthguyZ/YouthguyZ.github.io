---
sidebarDepth: 3
---

# Resolve å’Œ ResolveLoader

è¿™ä¸ªå±æ€§å¯ä»¥ä¿®æ”¹æ¨¡å—çš„è§£æè§„åˆ™ã€‚å…³äºæ¨¡å—çš„è§£æï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  [module resolution](https://webpack.js.org/concepts/module-resolution/)ã€‚

## æ¨¡å—è§£æè§„åˆ™

è¿™é‡Œæˆ‘ä»¬å¯¹è¿™ä¸ªè§£æè§„åˆ™åšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚

é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼Œwebpack æ˜¯æœ‰è‡ªå·±çš„é»˜è®¤è·¯å¾„è§£æè§„åˆ™çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨ importï¼Œrequire ç­‰è¯­å¥è¯·æ±‚å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œwebpack èƒ½æ­£ç¡®çš„åŠ è½½å‡ºæ¥çš„åŸå› ã€‚**è§£æå™¨æ˜¯æ ¹æ®èµ„æºçš„ç»å¯¹è·¯å¾„å»å®šä½æ¨¡å—çš„ã€‚** webpack ä½¿ç”¨ [enhanced-resolve](https://github.com/webpack/enhanced-resolve) ä½œä¸ºè§£æå™¨å»**è§£ææ¨¡å—è·¯å¾„**ï¼Œä»–çš„è§£æè§„åˆ™å¦‚ä¸‹ï¼š

### ç»å¯¹è·¯å¾„

```js
import '/home/workspace/util';

// or windows
import 'C:\\Users\\me\\file';
```

ç”±äºæˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†ç»å¯¹è·¯å¾„ï¼Œè¿™æ—¶å€™å°±ä¸éœ€è¦ä»€ä¹ˆè§£æå™¨å»è§£æäº†ã€‚

### ç›¸å¯¹è·¯å¾„

```js
import '../src/util.js'

import './math.js'
```

å°†å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œåœ¨æ ¹æ®ç›¸å¯¹è·¯å¾„çš„ä½ç½®å»è§£æå¯¹åº”çš„æ–‡ä»¶ã€‚

### æ¨¡å—è·¯å¾„

```js
import 'module'

import 'module/file.js'
```

æ¨¡å—çš„æœç´¢èŒƒå›´åœ¨ **resolve.modules** ä¸­æŒ‡å®šçš„æ‰€æœ‰ç›®å½•ä¸­ã€‚ä½ å¯ä»¥é€šè¿‡é…ç½® **resolve.alias** ç»™ä¸€ä¸ªæ¨¡å—èµ·ä¸€ä¸ªåˆ«åï¼Œç„¶åé€šè¿‡è¿™ä¸ªåˆ«åå¼•å…¥è¿™ä¸ªæ¨¡å—ï¼Œè¿™é‡Œå…ˆæœ‰ä¸ªå°è±¡ï¼Œæˆ‘ä»¬ä¸‹æ–‡ä¼šå…·ä½“ä»‹ç»ã€‚

å½“è·¯å¾„ç¡®è®¤åï¼Œè§£æå™¨ä¼šæ£€æŸ¥è¿™ä¸ªè·¯å¾„æŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶è¿˜æ˜¯ä¸€ä¸ªç›®å½•ã€‚

å¦‚æœæŒ‡å‘ä¸€ä¸ªæ–‡ä»¶çš„è¯ï¼Œåˆ†è¿™ä¸¤ç§æƒ…å†µï¼š

1. è·¯å¾„åŒ…å«æ–‡ä»¶æ‰©å±•åï¼Œåˆ™ç›´æ¥ç»‘å®šåˆ°è¿™ä¸ªæ–‡ä»¶
2. æ–‡ä»¶ä¸åŒ…å«æ‰©å±•åçš„æƒ…å†µä¸‹ï¼Œä¼šé‡‡ç”¨ **resolve.extensions** ä¸­çš„é€‰é¡¹ï¼Œé€ä¸€çš„å»è¯•æ¢æœ‰æ²¡æœ‰å¯¹åº”æ‰©å±•åçš„æ–‡ä»¶å­˜åœ¨

å¦‚æœæŒ‡å‘ä¸€ä¸ªç›®å½•çš„è¯ï¼Œä¼šæŒ‰å¦‚ä¸‹çš„æµç¨‹å»ç¡®å®šæ–‡ä»¶ï¼š

1. å¦‚æœç›®å½•ä¸­åŒ…å« package.json æ–‡ä»¶ï¼Œé‚£ä¹ˆä¼šæŒ‰é¡ºåºçš„æœç´¢ resolve.mainFields ä¸­çš„é…ç½®é¡¹ï¼Œæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹å°†ä¼šå†³å®šæ–‡ä»¶è·¯å¾„
2. å¦‚æœæ²¡æœ‰ package.json æ–‡ä»¶ï¼Œæˆ–è€… resolve.mainFields è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆè·¯å¾„ï¼Œé‚£ä¹ˆä¼šå»æŒ‰é¡ºåºçš„æŸ¥æ‰¾ resolve.mainFiles ä¸­çš„é…ç½®é¡¹ï¼Œçœ‹åœ¨è¿™ä¸ªç›®å½•ä¸‹èƒ½ä¸èƒ½æ‰¾ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶
3. æ ¹æ® resolve.extensions çš„é…ç½®è§£ææ–‡ä»¶ã€‚


å¦‚æœä½ å¯¹ resolve çš„é…ç½®ä¸æ˜¯å¾ˆäº†è§£çš„è¯ï¼Œé‚£ä¹ˆä½ å¯¹ä¸Šè¿°è¡¨è¿°çš„å†…å®¹å¯èƒ½ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚æ²¡å…³ç³»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹ resolve çš„å„é¡¹é…ç½®ï¼Œç›¸ä¿¡ä½ çœ‹å®Œä»¥åå†æ¥å›é¡¾ï¼Œä¸€å®šå¯ä»¥ç†è§£ã€‚


## resolve é…ç½®è¯¦è§£

### alias ğŸ”‘

é…ç½®æ¨¡å—çš„åˆ«åã€‚çœ‹ä¸‹é¢çš„æ —å­ï¼š

å¦‚æœä¸ä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œæˆ‘ä»¬å¼•å…¥æŸä¸ªæ–‡ä»¶å¯èƒ½è¦å†™ä¸Šä¸€è¿ä¸²çš„è·¯å¾„ï¼š

```js
import utils from '../../path/to/utils/'
```
è¿™æ ·çš„æ–¹å¼ï¼Œä¸ä»…å®¹æ˜“å‡ºé”™ï¼Œè€Œä¸”ä¸€æ—¦ä½ å˜æ›´äº†æ–‡ä»¶çš„è·¯å¾„ï¼Œä½ å°±è¦å»æ‰‹åŠ¨çš„ä¿®æ”¹å¼•å…¥æ¨¡å—çš„è·¯å¾„ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚è¿™æ—¶å€™ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ alias æ¥é…ç½®ï¼š

```js
const path = require('path');

module.exports = {
  //...
  resolve: {
    alias: {
      util: path.resolve(__dirname, 'path/to/utils')
    }
  }
};
```

æœ‰äº†è¿™ä¸ªé…ç½®ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­é€šè¿‡ï¼š`import util from 'util'` æ¥ä½¿ç”¨è¿™ä¸ªæ¨¡å—çš„å†…å®¹ï¼Œç›¸å½“æ–¹ä¾¿ï¼

ä» webpack 5 å¼€å§‹ï¼Œå®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„æ•°ç»„ï¼š

```js
module.exports = {
  resolve: {
    alias: {
      util: [path.resolve(__dirname, 'path/to/utils'), path.resolve(__dirname, 'path/to/another/utils')]
    }
  }
}
```

ä½ ä¹Ÿå¯ä»¥è®© webpack ä¸å»è§£æè¿™ä¸ªæ¨¡å—è·¯å¾„ï¼Œåªè¦å°†å®ƒè®¾ç½®æˆ false å³å¯ã€‚


```js
module.exports = {
  resolve: {
    alias: {
      util: false
    }
  }
}
```

#### ç²¾ç¡®åŒ¹é…

ä½ å¯ä»¥åœ¨ key åé¢åŠ ä¸Šä¸€ä¸ª $ è¡¨ç¤ºç²¾ç¡®çš„åŒ¹é…ï¼š

```js
const path = require('path');

module.exports = {
  //...
  resolve: {
    alias: {
      xyz$: path.resolve(__dirname, 'path/to/file.js')
    }
  }
};
```

å¾—åˆ°çš„ç»“æœå¦‚ä¸‹ï¼š
```js
import Test1 from 'xyz'; // æ­£ç¡®åŒ¹é…ã€‚è¿™å°±ç›¸å½“äºå¼•å…¥äº† path/to/file.js æ–‡ä»¶
import Test2 from 'xyz/file.js'; // åŒ¹é…å¤±è´¥ã€‚ä¼šæ‰§è¡Œæ™®é€šçš„æ–‡ä»¶è§£æã€‚ä¹Ÿå°±æ˜¯ä¼šå…ˆå»æ‰¾ node_modules/xyz/file.jsï¼Œåœ¨ä¸€çº§ä¸€çº§å¾€ä¸Šæ‰¾ã€‚
```

æ›´å¤šçš„å¯ä»¥å‚è€ƒè¿™å¼ è¡¨ï¼š[resolve.alias](https://webpack.js.org/configuration/resolve/#resolvealias)


### aliasFields

æŒ‡å®šè¦æ ¹æ®è¿™ä¸ª [è§„èŒƒ](https://github.com/defunctzombie/package-browser-field-spec) è§£æçš„å­—æ®µï¼Œæ¯”å¦‚ browserã€‚ä¸€èˆ¬æˆ‘ä»¬å¾ˆå°‘ä¼šé…ç½®è¿™ä¸ªå­—æ®µã€‚

```js
module.exports = {
  //...
  resolve: {
    aliasFields: ['browser']
  }
};
```

### descriptionFiles  ğŸ”‘

æŒ‡å®šæè¿°æ–‡ä»¶ã€‚

```js
module.exports = {
  //...
  resolve: {
    descriptionFiles: ['package.json']
  }
};
```

### enforceExtension  ğŸ”‘

å¼ºåˆ¶ä½¿ç”¨åç¼€åã€‚å¦‚æœè®¾ç½®æˆ true çš„è¯ï¼Œé‚£ä¹ˆä½ æ¯ä¸ªæ¨¡å—å¼•å…¥çš„ä»£ç éƒ½è¦å¸¦ä¸Šåç¼€åï¼Œä¸ç„¶è§£æä¼šæŠ¥é”™ã€‚

```js
module.exports = {
  resolve: {
    enforceExtension: false
  }
};
```

### extensions  ğŸ”‘

è¦è§£æçš„æ–‡ä»¶çš„åç¼€åã€‚å¦‚æœä½ å¼•å…¥çš„æ–‡ä»¶æ²¡æœ‰æä¾›åç¼€çš„è¯ï¼Œé‚£ä¹ˆä¼šæŒ‰é¡ºåºçš„å°è¯•è¿™é‡Œé¢çš„åç¼€ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œåé¢çš„éƒ½è·³è¿‡ã€‚

```js
module.exports = {
  resolve: {
    extensions: ['.js', '.jsx', '.json']
  }
};
```

å‡è®¾æˆ‘æœ‰ä¸€ä¸ª Button.jsx æ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘åœ¨å…¶å®ƒæ–‡ä»¶ä¸­å¼•å…¥è¿™ä¸ª Button çš„æ—¶å€™è¿™ä¹ˆå¼•å…¥çš„ï¼š

```js
import Button from './src/components/Button'
```

é‚£ä¹ˆè§£æå™¨å°±ä¼šå…ˆæ‰¾ src/components/Button.jsï¼Œæ²¡æ‰¾åˆ°ï¼Œç»§ç»­æ‰¾ src/components/Button.jsxï¼Œæ‰¾åˆ°äº†ï¼ŒOkï¼Œç»“æŸã€‚


:::tip
å¦‚æœä½ é…ç½®äº†è¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆæ„å‘³è¿™ webpack é»˜è®¤çš„è§„åˆ™è¢«ä½ é‡å†™äº†ã€‚ä½ é¡¹ç›®ä¸­æ‰€æœ‰çš„æ–‡ä»¶å¼•å…¥éƒ½ä¼šä½¿ç”¨è¿™ä¸ªè§„åˆ™å»è§£æã€‚
:::

### mainFields  ğŸ”‘

å½“ä»ä¸€ä¸ª npm åŒ…ä¸­å¯¼å…¥æ—¶ï¼Œæ¯”å¦‚ï¼š`import Vue from 'vue'`ï¼Œç”¨ package.json ä¸­å“ªä¸ªå­—æ®µçš„å€¼å¯¹åº”çš„æ–‡ä»¶ï¼Œå°±æ˜¯è¿™ä¸ªå±æ€§å†³å®šçš„ã€‚å®ƒçš„é»˜è®¤å€¼è·Ÿä½  webpack é…ç½®çš„ target æœ‰å…³ï¼š

å½“ target ä¸º webworkerï¼Œwebï¼Œæˆ–è€…æ²¡æœ‰æŒ‡å®šçš„æ—¶å€™ï¼Œé»˜è®¤å€¼ä¸ºï¼š
```js
module.exports = {
  resolve: {
    mainFields: ['browser', 'module', 'main']
  }
};
```

å…¶å®ƒæƒ…å†µä¸‹ä¸ºï¼š
```js
module.exports = {
  resolve: {
    mainFields: ['module', 'main']
  }
};
```

ä¸¾ä¸ªæ —å­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ vue.js çš„ package.json æ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹çš„é…ç½®ï¼š

```json
{
  "main": "dist/vue.runtime.common.js",
  "module": "dist/vue.runtime.esm.js",
}
```

å½“æˆ‘ä»¬ä½¿ç”¨ `import Vue from 'vue'` çš„æ—¶å€™ï¼Œåœ¨é»˜è®¤çš„ webpack é…ç½®ä¸‹ï¼Œå¾ˆæ˜¾ç„¶ä¼šå»æ‰¾ module å¯¹åº”çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ dist/vue.runtime.esm.js æ–‡ä»¶ã€‚å› ä¸º module åœ¨æ•°ç»„çš„å‰é¢ï¼Œä¼˜å…ˆçº§é«˜ã€‚


### mainFiles  ğŸ”‘

å½“è§£æåˆ°ä¸€ä¸ªç›®å½•çš„æ—¶å€™ï¼Œåº”è¯¥å»æ‰¾è¯¥ç›®å½•ä¸‹çš„å“ªä¸ªæ–‡ä»¶ã€‚

```js
module.exports = {
  //...
  resolve: {
    mainFiles: ['index']
  }
};
```

æ¯”å¦‚ä½ ä½¿ç”¨ `import { Button } from './components'` çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæ‰¾ ./components/index.js æ–‡ä»¶ã€‚


### modules  ğŸ”‘

æŒ‡å®š webpack è§£ææ¨¡å—æ—¶çš„æœç´¢è·¯å¾„ã€‚

ä»–å¯ä»¥æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ã€‚å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„çš„è¯ï¼Œå®ƒä¼šè·Ÿ Node å¯»æ‰¾ node_modules ä¸€æ ·ï¼Œä¸€å±‚å±‚çš„å¾€ä¸Šçº§æ‰¾ï¼›å¦‚æœæ˜¯ç»å¯¹è·¯å¾„çš„è¯ï¼Œé‚£ä¹ˆå°±ç›´æ¥åœ¨è¿™ä¸ªè·¯å¾„é‡Œé¢æ‰¾ã€‚

```js
const path = require('path');

module.exports = {
  resolve: {
    modules: [path.resolve(__dirname, 'src'), 'node_modules']
  }
};
```

æ³¨æ„ï¼Œæ•°ç»„é‡Œçš„é¡ºåºä¹Ÿä»£è¡¨äº†æŸ¥æ‰¾çš„ä¼˜å…ˆçº§ã€‚ä¸Šé¢çš„å®šä¹‰è¡¨ç¤ºï¼Œé’ˆå¯¹ä¸€ä¸ªæ–‡ä»¶ï¼Œå…ˆä» src ç›®å½•æ‰¾ï¼ˆè¿™æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ï¼‰ï¼Œæ²¡æ‰¾åˆ°çš„è¯å†ä» node_modules æ‰¾ï¼Œè¿˜æ²¡æ‰¾åˆ°çš„è¯å†ä» ../node_modules æ‰¾ï¼ˆè¿™æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¼šé€å±‚å¾€ä¸Šæ‰¾ï¼‰ï¼Œç›´åˆ°æ‰¾åˆ°ä¸ºæ­¢ï¼Œå¦åˆ™æŠ¥é”™æ‰¾ä¸åˆ° moduleã€‚

### unsafeCache

å¼€å¯ä¸å®‰å…¨çš„ç¼“å­˜ï¼ˆå¬ç€åå­—å°±ä¸å®‰å…¨ï¼‰ã€‚è®¾ç½®ä¸º true çš„è¯å°†ä¼šå¯¹æ‰€æœ‰æ¨¡å—åšç¼“å­˜ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šæŸä¸ªæ–‡ä»¶å¤¹å»å•ç‹¬åšç¼“å­˜ã€‚

```js
module.exports = {
  resolve: {
    // unsafeCache: true
    unsafeCache: /src\/utilities/ // åªå¯¹ src/utilities åšç¼“å­˜
  }
};
```

### cacheWithContext

å¦‚æœå¯ç”¨äº† unsafeCache ï¼Œé‚£ä¹ˆæŠŠ request.context ä½œä¸ºç¼“å­˜çš„ key åŒ…å«è¿›æ¥ã€‚å› ä¸º webpack 3.1.0 çš„æ—¶å€™ï¼Œå½“ä½ é…ç½®äº†resolve æˆ– resolveLoaderï¼Œé‚£ä¹ˆ context ä¼šåœ¨è§£æç¼“å­˜çš„æ—¶å€™è¢«å¿½ç•¥ã€‚è¿™ä¸ªé€‰é¡¹æ˜¯ä¸ºäº†æ€§èƒ½è€ƒè™‘åŠ ä¸Šçš„ã€‚


### cachePredicate

A function which decides whether a request should be cached or not. An object is passed to the function with path and request properties. It must return a boolean.

è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå†³å®šç€è¦ä¸è¦å¯¹ä¸€ä¸ªè¯·æ±‚åšç¼“å­˜ã€‚å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå®ƒæœ‰ path å’Œ request ä¸¤ä¸ªå±æ€§ã€‚å‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œæ¥å†³å®šç¼“å­˜ä¸å¦ã€‚

```js
module.exports = {
  //...
  resolve: {
    cachePredicate: (module) => {
      return /node_modules/.test(module.path); // åªå¯¹ node_modules ä¸‹çš„åšç¼“å­˜
    }
  }
};
```

### restrictions

è¿™ä¸ªæ˜¯ webpack5 æ–°åŠ çš„é…ç½®ï¼Œç”¨æ¥é™åˆ¶è§£æçš„è·¯å¾„ã€‚æ¯”å¦‚ä½ åªæƒ³è§£æ js æ–‡ä»¶å’Œ css æ–‡ä»¶çš„è¯ï¼Œä½ å¯ä»¥è¿™ä¹ˆé…ç½®ï¼š

```js
module.exports = {
  //...
  resolve: {
    restrictions: [/\.(js|css)$/]
  }
};
```

è¿™æ ·ï¼Œä½ é¡¹ç›®ä¸­ä»»ä½•è§£æåˆ°å…¶å®ƒç±»å‹æ–‡ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥é”™ã€‚


## resolveLoader é…ç½®

resolveLoader çš„é…ç½®å’Œ resolve ä¸€æ¨¡ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯å®ƒçš„ä½œç”¨å¯¹è±¡æ˜¯ loaderã€‚

```js
const path = require('path')

module.exports = {
  resolveLoader: {
    modules: ['node_modules', path.resolve(__dirname, './src/my-loaders')], // æŒ‡å®šä» node_modules å’Œ ./src/my-loaders ä¸­è§£æ loader
    extensions: ['.js', '.json'],
    mainFields: ['loader', 'main']
  }
};
```